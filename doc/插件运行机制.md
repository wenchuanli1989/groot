### 三层作用域架构
- entry作用域
- app作用域
- solution作用域

每个entry / app / solution 都有各自ExtensionInstance列表，可以进行添加/删除/版本升级，列表每一项的Extension.ID唯一

每个entry都有各自SolutionInstance列表，可以进行添加/删除/版本升级，列表每一项的Solution.ID唯一

### 两种模态
- 设计态（实例模式和原型模式）
- 非设计态

插件可以在两种模态之间存在

### 规则说明

- 设计态

  - 设计态插件主要增加UI界面和操作交互过程，完成信息配置

  - 相同Extension.ID的插件之间启动运行具有抢占性，且可以跨越不同作用域层级，后加载的插件永远不会被运行，而且运行的插件停止运行具有滞后性，会在相同Extension.ID的插件全部卸载之后卸载，抢占存在于多个相同Extension.ID插件需要启动时发生，抢占性分为恶性和非恶性，恶性抢占会导致程序运行的不确定性
  
    - 非恶性抢占
      - app插件抢占entry插件
      - 单entry模式下entry插件抢占solution插件
      
    - 恶性抢占
      - 单entry模式主solution插件抢占附属solution插件
      - 多entry模式entry之间插件相互强制
      - 多entry模式solution之间插件抢占
      - 多entry模式solution插件抢占entry插件

  - 单entry模式，插件启动顺序 app -> entry -> solution，多entry模式，entry每次启动时机存在不确定性，所以插件抢占发生也存在不确定性


- 非设计态

  - 非设计态插件包含构建和运行两个阶段且存在先后顺序，构建阶段主要调整和维护构建产物，运行阶段主要是对构建产物提供运行时动态能力

    - 构建阶段

      - 构建阶段主要完成属性和资源的静态计算，构建阶段最终可以产生运行阶段执行的代码既 `任务`，通过任务名唯一区分，且可以通过优先级方式覆盖

        - 属性计算，每个solution作用域下插件只会处理自己管辖范围的属性，且存在solution < app < entry 优先级关系

        - 资源计算，存在solution < app < entry 优先级关系

      - 构建阶段也存在抢占性，但是只有单entry模式构建，
      
        - 非恶性抢占
          - app插件抢占entry插件
          - 单entry模式下entry插件抢占solution插件
          
        - 恶性抢占
          - 单entry模式主solution插件抢占附属solution插件
      
    - 运行阶段

      - 运行阶段主要完成属性和资源的动态计算
    
      - 运行阶段不存在抢占概念，一个插件经过构建阶段之后可以产生多个不同任务，这些任务分为属性计算任务和资源计算任务，每个任务都可处理多个属性或资源的计算，单个属性或资源仅能指定一个任务处理




