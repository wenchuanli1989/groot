### 三层作用域架构
- view作用域
- app作用域
- solution作用域

每个作用域都有多个ExtensionInstance，根据Extension.ID进行去重判断

每个view都有多个SolutionInstance，根据Solution.ID进行去重判断

### 两种模态
- 设计态（实例模式和原型模式）
- 非设计态

插件可以运行在两种模态中

### 规则说明

- 设计态

  - 设计态插件主要完成信息配置

  - 所有作用域包含相同Extension.ID的插件启动运行具有抢占性，最先加载插件一旦启动运行，后续加载相同Extension.ID的插件永远不会被运行，即插件处于加载完成但是不允许的状态；且运行的插件停止运行具有滞后性，会在所有作用域包含相同Extension.ID的插件全部卸载之后卸载，抢占性分为恶性和非恶性，恶性抢占会导致程序运行的不确定性
  
    - 非恶性抢占
      - app插件抢占view插件
      - 单view模式下view插件抢占solution插件
      
    - 恶性抢占
      - 单view模式主solution插件抢占附属solution插件
      - 多view模式view之间插件相互强制
      - 多view模式solution之间插件抢占
      - 多view模式solution插件抢占view插件

  - 单view模式，插件启动顺序 app -> view -> solution，多view模式，view每次启动时机存在不确定性，所以插件抢占发生也存在不确定性


- 非设计态

  - 非设计态插件包含构建和运行两个阶段，构建阶段主要调整和维护构建产物，运行阶段主要是对构建产物提供运行时动态能力

    - 构建阶段

      - 构建阶段主要生成属性和资源，插件在该阶段可以生成在运行阶段执行的代码既 `任务`，通过任务名唯一区分，当不同插件处理相同属性或者资源时通过优先级覆盖

        - 生成属性任务，每个solution作用域的插件只会处理solution所属组件的属性，优先级：solution < app < view 

        - 生成资源任务，优先级：solution < app < view 

      - 构建阶段也存在抢占性，但是同一时间只会有一个view在构建，不存在多view构建
      
        - 非恶性抢占
          - app插件抢占view插件
          - 单view模式下view插件抢占solution插件
          
        - 恶性抢占
          - 单view模式主solution插件抢占附属solution插件
      
    - 运行阶段

      - 运行阶段存在的任务主要完成属性和资源的动态计算，每个任务可以为多个属性或资源进行动态计算
    
      - 运行阶段没有插件，只会有插件产生的任务，单个属性或资源都可以指定一个为其进行动态计算的任务




